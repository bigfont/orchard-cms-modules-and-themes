@using Orchard.DisplayManagement.Shapes;

@functions
{
    List<object> GetItemsFromModel()
    {
        List<object> items;
        if (Model.ContentItems != null)
        {
            if (Model.ContentItems.ContentItems != null)
            {
                // Parts_Blogs_RecentBlogPosts shape
                // @Model.ContentItems.ContentItems.Items
                items = Model.ContentItems.ContentItems.Items;
            }
            else
            {
                // Parts_Blogs_BlogPost_List shape
                // @Model.ContentItems.Items
                items = Model.ContentItems.Items;
            }
        }
        else
        {
            // List shape
            // @Model.Items
            items = Model.Items;
        }
        return items;
    }
}

@{        
    var items = GetItemsFromModel();                           
    var count = items.Count;
    var listTag = Tag(Model, "ul");
    listTag.AddCssClass("list-group");
    var index = 0;
}

@listTag.StartElement
@foreach (var item in items)
{
    var itemTag = Tag(item, "li");
    itemTag.AddCssClass("list-group-item");
    @itemTag.StartElement
    @Display(item)
    @itemTag.EndElement
    ++index;
}
@listTag.EndElement